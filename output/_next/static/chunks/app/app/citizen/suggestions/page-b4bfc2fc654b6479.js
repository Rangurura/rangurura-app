(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3030],{78022:function(e,t,l){Promise.resolve().then(l.bind(l,22483))},38647:function(e,t,l){"use strict";var s=l(33968),a=l(20251),n=l(10904);let i=(0,l(47713).getCookie)("lang");s.ZP.use(n.Z).use(a.Db).init({lng:i,fallbackLng:"ki",backend:{loadPath:"/locales/{{lng}}/{{ns}}.json"},react:{useSuspense:!0}}),t.Z=s.ZP},22483:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return z}});var s=l(57437),a=l(2265),n=l(64267),i=l(61396),r=l.n(i),o=l(16691),c=l.n(o),d=l(10519),u=l(60236),h=l(73533),x=l(5925),g=l(24033),m=l(22444),f=l(72027),j=l(51696),b=l(92173),v=l(82157),N=l(20577),p=l(86655),w=l(53159),k=l(40311),y=e=>{let{closeL:t}=e,[l,{open:i,close:o}]=(0,m.q)(!1),[y,A]=(0,a.useState)(!1);(0,g.useRouter)();let[C,S]=(0,a.useState)(""),[z,I]=(0,a.useState)(""),[U,R]=(0,a.useState)(""),[E,D]=(0,a.useState)(""),[P,L]=(0,a.useState)(""),[B,O]=(0,a.useState)(""),[F,Z]=(0,a.useState)("");return(0,v.US)().then(e=>{var t,l;Z(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.nationalId),D(null==e?void 0:null===(l=e.data)||void 0===l?void 0:l.phoneNumber)}),(0,s.jsxs)("section",{className:"flex justify-center items-center w-full h-full bg-[#EEF3F9]",children:[(0,s.jsx)(d.u,{opened:l,onClose:o,withCloseButton:!0,closeOnClickOutside:!1,children:(0,s.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!P||!U||!F||!E){console.log(U,P,B,F,E),x.ZP.error("Fill All Fields!");return}A(!0);let t={category:P,igitekerezo:B,urwego:z.toUpperCase(),phoneNumber:E,upperLevel:U,location:U,nationalId:F};b.Z.post("".concat(f.v2,"/suggestions/send_idea"),JSON.stringify(t),{headers:{"Content-Type":"application/json"}}).then(e=>{A(!1),p.N9.show({title:"Report Suggestion",message:"Suggestion Reported Successfully!",autoClose:5e3,icon:(0,s.jsx)(w.wO,{})}),I(""),S(""),R(""),O(""),o(),console.log(e.data)}).catch(e=>{var t;p.N9.show({title:"Report Suggestion Error",message:null===(t=e.response)||void 0===t?void 0:t.data.error,color:"#FF555D",autoClose:5e3,icon:(0,s.jsx)(k.toq,{})}),console.log("Send suggestions error ",e),A(!1)})},className:"w-full flex flex-col justify-center py-5 pb-10 gap-2",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsxs)("label",{className:"font-semibold text-black",children:["Hitamo Ubwoko bw'ikibazo cyawe"," ",(0,s.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,s.jsx)(u.P,{value:P,data:N.bd,onChange:e=>L(e)})]}),(0,s.jsx)("div",{className:"flex items-center justify-center pt-3",children:(0,s.jsx)("button",{onClick:i,className:"btn_primary text-white p-2 px-10 rounded-md",disabled:y,children:y?(0,s.jsx)("div",{className:"w-full h-full flex justify-center items-center",children:(0,s.jsx)(j.Z,{size:18,color:"white"})}):"Tanga Igitekerezo"})})]})}),(0,s.jsxs)("div",{className:"flex flex-col bg-white rounded p-8 items-center justify-center gap-8 w-full",children:[(0,s.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[(0,s.jsx)(r(),{href:"/",children:(0,s.jsx)(c(),{src:n.default,alt:"",width:60})}),(0,s.jsx)("h3",{className:"font-bold text-[#001833] text-2xl",children:"Tanga Igitekerezo"})]}),(0,s.jsxs)("div",{className:"w-full flex flex-col justify-center gap-2",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsxs)("label",{className:"font-semibold text-black",children:["Hitamo aho ushaka kugeza Igitekerezo"," ",(0,s.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,s.jsx)(u.P,{value:C,onChange:e=>S(e),data:N.Cx}),"Ikigo cya Leta"===C&&(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsxs)("label",{className:"font-semibold text-black",children:["Hitamo aho ushaka kugeza Igitekerezo"," ",(0,s.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,s.jsx)(u.P,{data:N.DA})]}),"Urwego Rw'Ibanze"===C&&(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsxs)("label",{className:"font-semibold text-black",children:["Hitamo ",C," ushaka kugeza Igitekerezo"," ",(0,s.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,s.jsx)(u.P,{value:z,onChange:e=>I(e),data:N._J})]}),(0,s.jsx)(h.Z,{organisationCategory:C,organisationLevel:z,setLevel:R})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsxs)("label",{className:"font-semibold text-black",children:["Igitekerezo"," ",(0,s.jsx)("span",{className:"text-red-600 text-sm",children:"* (Maximum Characters: 255)"})]}),(0,s.jsx)("textarea",{maxLength:254,rows:2,placeholder:"Igitekerezo",className:"min-h-[8rem] border-[#C3C3C3] border-2 rounded-md p-2",style:{resize:"none"},value:B,onChange:e=>O(e.target.value)})]}),(0,s.jsx)("div",{className:"flex items-center justify-center pt-3",children:(0,s.jsx)("button",{disabled:y,onClick:i,className:"btn_primary text-white p-2 px-10 rounded-md",children:"Komeza"})})]})]})]})},A=l(69542),C=l(36468),S=l(43487),z=()=>{let[e,{open:t,close:l}]=(0,m.q)(!1),[n,i]=(0,a.useState)(!1),[r,o]=(0,a.useState)([]),c=async()=>{i(!0);try{var e,t,l,s;let a=await f.N$.get("/suggestions/mine");(null===(t=a.data)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)?o([]):o(null===(s=a.data)||void 0===s?void 0:null===(l=s.data)||void 0===l?void 0:l.reverse())}catch(e){console.error("Error fetching suggestions:",e)}finally{i(!1)}};return(0,a.useEffect)(()=>{i(!0),f.N$.get("/suggestions/mine").then(e=>{var t,l,s;console.log(null===(t=e.data)||void 0===t?void 0:t.data),(null===(s=e.data)||void 0===s?void 0:null===(l=s.data)||void 0===l?void 0:l.message)?o([]):o(e.data.data.reverse()),i(!1)}).catch(e=>{console.log(e),i(!1)})},[]),(0,s.jsxs)("div",{className:"w-full h-[90%] flex items-center justify-between mt-4",children:[(0,s.jsxs)("div",{className:"w-full h-full",children:[(0,s.jsxs)("div",{className:"w-full flex items-center justify-between",children:[(0,s.jsx)("h1",{className:"text-[1.5rem] font-extrabold",children:"Suggestions"}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,s.jsxs)("button",{type:"button",className:"bg-[#20603D] flex items-center gap-2 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-md",onClick:c,children:[(0,s.jsx)(S.jq8,{}),"Refresh"]}),(0,s.jsx)("button",{type:"button",onClick:t,className:"bg-[#20603D] w-[15rem] px-3 py-3 rounded-lg flex items-center justify-center text-white font-extrabold",children:"Give New Suggestion"})]})]}),(0,s.jsx)("div",{className:"w-full h-[85%]",children:(0,s.jsx)(A.Z,{data:r,loading:n})})]}),(0,s.jsxs)(d.u,{opened:e,onClose:l,h:"100vh",closeOnClickOutside:!1,className:"overflow-y-hidden relative",size:"xl",withCloseButton:!1,children:[(0,s.jsx)("button",{className:"absolute top-6 right-4",onClick:l,children:(0,s.jsx)(C.bjh,{size:24})}),(0,s.jsx)(y,{closeL:l})]})]})}},73533:function(e,t,l){"use strict";var s=l(57437),a=l(60236),n=l(26743);t.Z=e=>{let{organisationCategory:t,organisationLevel:l,setLevel:i,show:r}=e;return(0,s.jsx)(s.Fragment,{children:"Urwego Rw'Ibanze"===t&&(0,s.jsxs)(s.Fragment,{children:["INTARA"===l&&(0,s.jsxs)(s.Fragment,{children:[(!0===r||void 0===r)&&(0,s.jsxs)("label",{className:"font-semibold text-black",children:["Hitamo ",l," ushaka kugezaho ikibazo"]}),(0,s.jsx)(a.P,{placeholder:"Hitamo ".concat(l),data:(0,n.Rb)(),size:"md",searchable:!0,onChange:e=>i(e)})]}),"AKARERE"===l&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("label",{className:"font-semibold text-black",children:["Hitamo ",l," ushaka kugezaho ikibazo"]}),(0,s.jsx)(a.P,{placeholder:"Hitamo ".concat(l),data:(0,n.Ww)(),size:"md",searchable:!0,onChange:e=>i(e)})]}),"UMURENGE"===l&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("label",{className:"font-semibold text-black",children:["Hitamo ",l," ushaka kugezaho ikibazo"]}),(0,s.jsx)(a.P,{placeholder:"Hitamo ".concat(l),data:[...new Set((0,n.jB)())],size:"md",searchable:!0,onChange:e=>i(e)})]}),"AKAGARI"===l&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("label",{className:"font-semibold text-black",children:["Hitamo ",l," ushaka kugezaho ikibazo"]}),(0,s.jsx)(a.P,{placeholder:"Hitamo ".concat(l),data:[...new Set((0,n.n1)())],size:"md",searchable:!0,onChange:e=>i(e)})]})]})})}},69542:function(e,t,l){"use strict";l.d(t,{Z:function(){return x}});var s=l(57437),a=l(18513),n=l(53159),i=l(71824),r=l(59226),o={src:"/_next/static/media/no_data_gif.6abe0494.gif",height:150,width:150,blurWidth:0,blurHeight:0},c=l(16691),d=l.n(c),u=l(39528);function h(e){let{text:t}=e;return(0,s.jsx)("div",{className:"w-full flex justify-center",children:(0,s.jsx)("button",{onClick:()=>{let e=new SpeechSynthesisUtterance(t);window.speechSynthesis.speak(e)},children:(0,s.jsx)(n.uYL,{})})})}l(2265);var x=e=>{let{data:t,loading:l}=e,c=[{accessorKey:"Description",header:e=>{let{column:t}=e;return(0,s.jsx)("div",{className:"w-4/5",children:(0,s.jsx)("h4",{children:"Suggestion"})})},cell:e=>{var t,l,a,n,i;let{row:r}=e;return(0,s.jsx)("h6",{className:"text-[80%]",children:(null===(l=r.original)||void 0===l?void 0:null===(t=l.igitekerezo)||void 0===t?void 0:t.toString().length)<30?null===(a=r.original)||void 0===a?void 0:a.igitekerezo:"".concat(null===(i=r.original)||void 0===i?void 0:null===(n=i.igitekerezo)||void 0===n?void 0:n.slice(0,58)," . . .")})}},{accessorKey:"Completed",header:e=>{let{column:t}=e;return(0,s.jsx)(n.UUc,{color:"#ccc"})},cell:e=>{let{row:t}=e;return"PENDING"==t.original.status?(0,s.jsx)(i.QCV,{color:"#FA8701"}):(0,s.jsx)(n.UUc,{color:"#00D560"})}},{accessorKey:"listen",header:e=>{let{column:t}=e;return(0,s.jsx)("h3",{children:"Listen"})},cell:e=>{let{row:t}=e;return(0,s.jsx)(h,{text:t.original.igitekerezo})}},{accessorKey:"Actions",header:e=>{let{column:t}=e;return(0,s.jsx)("h3",{children:"Actions"})},cell:e=>{let{row:t}=e;return(0,s.jsx)(u.Z,{data:t.original})}}];return(0,s.jsx)("div",{className:"w-full h-full flex justify-center  px-2 mt-8",children:l?(0,s.jsx)("div",{className:"w-full h-[80%] bg-white p-2",children:(0,s.jsx)(r.Z,{columns:c})}):(null==t?void 0:t.length)==0?(0,s.jsxs)("div",{children:[(0,s.jsx)(d(),{src:o,alt:"No Data GIF"}),(0,s.jsx)("h1",{className:"mt-[1rem] font-bold",children:"No Suggestions So Far!"})]}):(0,s.jsx)("div",{className:"w-full h-max bg-white",children:(0,s.jsx)(a.w,{allowPagination:!0,data:t.reverse(),columns:c,tableClass:""})})})}},39528:function(e,t,l){"use strict";l.d(t,{Z:function(){return j}});var s=l(57437),a=l(27431),n=l(58910),i=l(2265),r=l(4617),o=l(67108),c=l(10519),d=l(41697),u=l(72027),h=l(86655),x=l(51696),g=l(53159),m=l(40311),f=e=>{let{suggestion:t,close:l}=e,[a,n]=i.useState(!1);return(0,s.jsxs)("div",{className:"w-full h-full flex flex-col gap-3 items-center",children:[(0,s.jsx)("header",{className:"w-full text-center font-extrabold text-lg",children:"Are you sure you want to delete this Suggestion?"}),(0,s.jsxs)("div",{className:"w-full flex flex-col",children:[(0,s.jsxs)("h2",{children:["Location: ",null==t?void 0:t.location]}),(0,s.jsx)("h2",{children:"Description: "}),(0,s.jsx)("p",{className:"border border-[#ccc] my-3 p-2 text-justify rounded-lg text-[90%] bg-[#e6edfc]",children:t.igitekerezo}),(0,s.jsxs)("div",{className:"w-full mt-5 flex justify-between md:px-[10%]",children:[(0,s.jsx)("button",{onClick:()=>l(),className:"py-3 px-8 rounded-3xl flex items-center justify-center bg-[#ccc] text-black",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{n(!0),u.N$.delete("/suggestions/delete/".concat(t.id)).then(e=>{h.N9.show({title:"Delete Suggestion",message:"Successfully Deleted Suggestion!",autoClose:5e3,icon:(0,s.jsx)(g.wO,{})}),l()}).catch(e=>{h.N9.show({title:"Delete Problem",message:"Error occurred when deleting a suggestion!",color:"#FF555D",autoClose:5e3,icon:(0,s.jsx)(m.toq,{})})}).finally(()=>n(!1))},className:"py-3 px-8 rounded-3xl flex items-center justify-center bg-[#FF555D] text-black",children:a?(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,s.jsx)(x.Z,{size:24,color:"white"})}):"Delete"})]})]})]})};function j(e){let{data:t}=e,[l,u]=(0,i.useState)(!1);return(0,s.jsxs)(r.v,{shadow:"md",width:200,children:[(0,s.jsx)(r.v.Target,{children:(0,s.jsx)("span",{className:"cursor-pointer",children:(0,s.jsx)(a.LkB,{})})}),(0,s.jsxs)(r.v.Dropdown,{children:[(0,s.jsx)(r.v.Item,{leftSection:(0,s.jsx)(a.BpP,{style:{width:(0,o.h)(14),height:(0,o.h)(14)}}),children:(0,s.jsx)("h5",{children:"Hide"})}),(0,s.jsx)(r.v.Item,{leftSection:(0,s.jsx)(n.SE8,{style:{width:(0,o.h)(14),height:(0,o.h)(14)}}),children:(0,s.jsx)("h5",{children:"Pin"})}),(0,s.jsx)(r.v.Item,{leftSection:(0,s.jsx)(d.Rym,{style:{width:(0,o.h)(14),height:(0,o.h)(14)}}),children:(0,s.jsx)("h5",{children:"Mark As Solved"})}),(0,s.jsx)(r.v.Divider,{}),(0,s.jsx)(r.v.Label,{children:"Danger zone"}),(0,s.jsx)(r.v.Item,{onClick:()=>{u(!0),console.log(t.igitekerezo)},color:"red",leftSection:(0,s.jsx)(n.FH3,{style:{width:(0,o.h)(14),height:(0,o.h)(14)}}),children:"Delete"})]}),(0,s.jsx)(c.u,{opened:l,onClose:()=>u(!1),children:(0,s.jsx)(f,{suggestion:t,close:()=>u(!1)})})]})}},20577:function(e,t,l){"use strict";l.d(t,{Cx:function(){return n},DA:function(){return i},_J:function(){return s},bd:function(){return a},rH:function(){return r}});let s=[{label:"Akagari",value:"AKAGARI"},{label:"Umurenge",value:"UMURENGE"},{label:"Akarere",value:"AKARERE"},{label:"Intara",value:"INTARA"}],a=[{label:"Ubuzima",value:"UBUZIMA"},{label:"Uburezi",value:"UBUREZI"},{label:"Imibereho Myiza",value:"IMIBEREHOMYIZA"},{label:"Imyidagaduro",value:"IMYIDAGADURO"},{label:"Umurekano",value:"UMUTEKANO"},{label:"Ubutaka",value:"UBUTAKA"}];JSON.stringify({name:"David NYIRINGABO",phoneNumber:"0788460119"}),JSON.stringify({name:"Anne UHIRIWE",phoneNumber:"0783457998"}),JSON.stringify({name:"MUGABO Peter ",phoneNumber:"0783475989"});let n=[{label:"Urwego Rw'Ibanze",value:"Urwego Rw'Ibanze"},{label:"Ikigo cya Leta",value:"Ikigo cya Leta"}],i=[{label:"POLICE",value:"POLICE"},{label:"RIB",value:"RIB"},{label:"RGB",value:"RGB"},{label:"MINISANTE",value:"MINISANTE"}],r=[{label:"Umuyobozi mukuru",value:" UMUYOBOZI_MUKURU"},{label:"Umuyobozi w'uburezi",value:" UMUYOBOZI_W_UBUREZI"}]},82157:function(e,t,l){"use strict";l.d(t,{B2:function(){return n},US:function(){return a},uE:function(){return i}}),l(47713),l(38647);var s=l(72027);let a=async()=>(await s.N$.get("/users/me")).data,n=async()=>(await s.N$.get("/leaders/all")).data,i=e=>{switch(null==e?void 0:e.toLowerCase()){case"district":return"Mayor";case"intara":return"Governor";case"umurenge":return"Executive Secretary of Sector";case"akagari":return"Executive Secretary of Cell";default:return"No Role Set"}}},64267:function(e,t,l){"use strict";l.r(t),t.default={src:"/_next/static/media/logo-dark (1).dd93cfad.png",height:66,width:68,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAl0lEQVR42k3PoQrCUBjF8aNBzGLzCUzCvQaLTUQwLuhrKILV5BP4Er6EYBezTW0mm6gr25/tDDb4sbOz73L5JAVhijsyu2Gi8gmJyyvmUkzwdLeQFL64SP0G7zWW0oAcX+SPPLmj6KC6Yoxt8U14IMUQJw9tsMJbFCPCHxl+8t3YYyZv0WPw4NNntMldbxFbtVWP/il3zRxRyC10qeQ2VQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8}},24033:function(e,t,l){e.exports=l(15313)},22444:function(e,t,l){"use strict";l.d(t,{q:function(){return a}});var s=l(2265);function a(e=!1,t){let{onOpen:l,onClose:a}=t||{},[n,i]=(0,s.useState)(e),r=(0,s.useCallback)(()=>{i(e=>e||(l?.(),!0))},[l]),o=(0,s.useCallback)(()=>{i(e=>e?(a?.(),!1):e)},[a]),c=(0,s.useCallback)(()=>{n?o():r()},[o,r,n]);return[n,{open:r,close:o,toggle:c}]}},57042:function(e,t,l){"use strict";function s(){for(var e,t,l=0,s="",a=arguments.length;l<a;l++)(e=arguments[l])&&(t=function e(t){var l,s,a="";if("string"==typeof t||"number"==typeof t)a+=t;else if("object"==typeof t){if(Array.isArray(t)){var n=t.length;for(l=0;l<n;l++)t[l]&&(s=e(t[l]))&&(a&&(a+=" "),a+=s)}else for(s in t)t[s]&&(a&&(a+=" "),a+=s)}return a}(e))&&(s&&(s+=" "),s+=t);return s}l.d(t,{W:function(){return s}}),t.Z=s}},function(e){e.O(0,[2420,1582,1787,3033,9982,8061,3190,2184,5812,1749,2173,2734,7695,8567,236,5250,251,3696,4617,7,3125,2851,2027,8513,2971,4938,1744],function(){return e(e.s=78022)}),_N_E=e.O()}]);